<h2>Drupal Status</h2>

<div class="gauges-container">
	<div id="drupalstat-loading-message-container"><h2>Gathering statistics ...</h2></div>
	<div id="loadAverage1" class="gauge 200x160px"></div>
	<div id="loadAverage2" class="gauge 200x160px"></div>
	<div id="loadAverage3" class="gauge 200x160px"></div>
	<div style="clear:both"></div>
</div>

<div class="drupalstat-text-stats">
	<div class="drupalstat-text-stats-column">
		<div class="list-group">
			<a href="#" class="list-group-item active"><span class="fa fa-drupal"></span> &nbsp;<strong>Published Nodes By Type</strong></a>
			{% for nodeType in drupalInfo.publishedNodeCounts %}
				<span class="list-group-item">
					<a class="pull-left" alt="Add New" title="Add New" href="/node/add/{{ nodeType.type }}"><span class="fa fa-plus"></span></a>&nbsp;
					<a href="/admin/content?status=1&type={{ nodeType.type }}&title=&langcode=All" class="" alt="View all" title="View all">
						
						{% if nodeType.type_count %}
							{% set nodeCountClass = 'badge-active' %}
						{% else %}
							{% set nodeCountClass = 'badge-default' %}
						{% endif %}

						<span class="badge {{ nodeCountClass }} pull-right">{{ nodeType.type_count }}</span>
						{{ drupalInfo.nodeTypeNames[ nodeType.type ] }}
					</a>
				</span>
			{% endfor %}
		</div>
	</div>

	<div class="drupalstat-text-stats-column">
		<ul class="list-group">

			{% if drupalInfo.maintenance_mode %}
				{% set maintIcon = 'fa-toggle-off' %}
			{% else %}
				{% set maintIcon = 'fa-toggle-on' %}
			{% endif %}

			<li class="list-group-item active"><span class="fa fa-drupal"></span>&nbsp; <strong>Site Data/Tasks</strong></li>
			<li class="list-group-item"> <a href="/admin/config/system/site-information" alt="Edit" title="Edit"><span class="fa fa-edit fa-fw"></span></a> Site Name: <span class="badge badge-active">{{ drupalInfo.settings.system.site.name }}</span></li>
			<li class="list-group-item"> <a href="/admin/appearance" alt="Edit" title="Edit"><span class="fa fa-edit fa-fw"></span></a> Site Theme: <span class="badge badge-active">{{ drupalInfo.settings.theme.default }}</span></li>
			<li class="list-group-item"> <a href="/admin/modules/install" alt="Install new module" title="Install new module"><span class="fa fa-plus fa-fw"></span></a> <a href="/admin/modules" alt="Browse installed modules" title="Browse installed modules">Enabled Modules</a>: <span class="badge badge-active">{{ drupalInfo.enabledModulesCount }}</span></li>

			{%if drupalInfo.maintenance_mode == 'On' %}
				{% set maintenanceModeClass = 'badge-green' %}
			{% else %}
				{% set maintenanceModeClass = 'badge-default' %}
			{% endif %}

			<li class="list-group-item"> <a href="/admin/people/create"><span class="fa fa-plus fa-fw"></span></a> Total # Users: <span class="badge badge-active">{{ drupalInfo.userCount }}</span></li>
			<li class="list-group-item"> <a href="/drupalstat/toggle-maintenance-mode" class="use-ajax"><span id="toggleMaintenanceMode" title="Toggle maintenance mode"><span id="maintenanceModeIcon" class="fa {{ maintIcon }} fa-fw"></span></span></a>&nbsp; Maintenance Mode: <span id="maintenanceModeBadge" class="badge {{ maintenanceModeClass }}">{{ drupalInfo.maintenance_mode }}</span></li>

			<li class="list-group-divider"></li>

			{%if drupalInfo.numVisitorsOnline %}
				{% set visitorClass = 'badge-active' %}
			{% else %}
				{% set visitorClass = 'badge-default' %}
			{% endif %}

			<li class="list-group-item"> <a href="/admin/people/create"><span class="fa fa-plus fa-fw"></span></a> Total # Users: <span class="badge badge-active">{{ drupalInfo.userCount }}</span></li>
			<li class="list-group-item"> <span class="fa fa-users fa-fw"></span> Users Online Now: <span class="badge badge-active">{{ drupalInfo.numAuthUsersOnline }}</span></li>
			<li class="list-group-item"> <span class="fa fa-users fa-fw"></span> Visitors Online Now: <span class="badge {{ visitorClass }}">{{ drupalInfo.numVisitorsOnline }}</span></li>
			<li class="list-group-item"> <a href="/drupalstat/purge-sessions" class="use-ajax" alt="Purge sessions now (except this one!)" title="Purge sessions now (except this one!)"><span class="fa fa-trash fa-fw"></span></a> Number of Session Entries: <span id="num-session-entries" class="badge badge-active">{{ drupalInfo.numSessionEntries }}</span></li>

			<li class="list-group-divider"></li>

			<li class="list-group-item"> <a href="/cron/{{ drupalInfo.cron.cron_key }}" alt="Run cron now" title="Run cron now"><span class="fa fa-clock-o fa-fw"></span></a> Cron Last Run: <span class="badge badge-active">{{ drupalInfo.cron.cron_last }}</span></li>
			<li class="list-group-item"> <a href="{{ drupalInfo.updateCheckURL }}"><span class="fa fa-gears fa-fw"></span></a> Last Checked for Updates: <span class="badge badge-active">{{ drupalInfo.update_last_check }}</span></li>

			<li class="list-group-item"> <a href="/drupalstat/rebuild-drupal-cache" class="use-ajax" alt="Clear/rebuild cache now" title="Clear/rebuild cache now"><span class="fa fa-refresh fa-fw"></span></a> Drupal Cache Last Refreshed: <span id="last_cache_rebuild" class="badge badge-active">{{ drupalInfo.timestamp_cache_last_rebuild }}</span></li>
			<li class="list-group-item"> <span class="fa fa-hdd-o fa-fw"></span> Install Size: <span class="badge badge-active">{{ drupalInfo.installSize }}</span></li>
			<li class="list-group-item"> <a href="/drupalstat/cleanup-old-files" class="use-ajax" alt="Remove old aggregated css/js files now" title="Remove old aggregated css/js files now"><span class="fa fa-trash fa-fw"></span></a> Old Aggregated File Storage: <span id="old-files-storage-size" class="badge badge-active">{{ drupalInfo.oldFilesStorageSize }}</span></li>
		</ul>
	</div>

	<div class="drupalstat-text-stats-column">
		<ul class="list-group">
			<li class="list-group-item active"><span class="fa fa-envelope"></span>&nbsp; <strong>MailChimp Stats</strong></li>
			{% if drupalInfo.mailchimp|length == 0 %}
				<li class="list-group-item">Mailchimp not installed, or no lists created yet!</li>
			{% endif %}
			{% for listId, list in drupalInfo.mailchimp %}

				{% if list.stats.member_count %}
					{% set memberCountClass = 'badge-active' %}
				{% else %}
					{% set memberCountClass = 'badge-default' %}
				{% endif %}

				{% if list.stats.click_rate %}
					{% set ctrClass = 'badge-clickrate' %}
				{% else %}
					{% set ctrClass = 'badge-default' %}
				{% endif %}

				{% if list.stats.open_rate %}
					{% set openRateClass = 'badge-openrate' %}
				{% else %}
					{% set openRateClass = 'badge-default' %}
				{% endif %}

				<li class="list-group-item"> {{ list.name }} <span title="Number of subscribers" class="badge {{ memberCountClass }}">{{ list.stats.member_count }} Subs</span> <span title="Average click through rate (CTR)" class="badge {{ ctrClass }}">{{ list.stats.click_rate }}</span> <span title="Average open rate" class="badge {{ openRateClass }}">{{ list.stats.open_rate }}</span></li>
			{% endfor %}
		</ul>

		<ul class="list-group">
			<li class="list-group-item active"><span class="fa fa-search"></span>&nbsp; <strong>Top Site Searches Today <a href="/admin/reports/search" target="_blank" class="pull-right btn btn-sm btn-default btn-search-more" alt="Click for more ..." title="Click for more ..."><span class="fa fa-search"></span></a></strong></li>
			{% if drupalInfo.topSearches %}
				{% for search in drupalInfo.topSearches %}
					<li class="list-group-item">{{ search.searchPhrase }} <span class="badge badge-active">{{ search.count }}</span></li>
				{% endfor %}
			{% else %}
				<li class="list-group-item">No searches performed yet today!</li>
			{% endif %}
		</ul>
	</div>

</div>

<div class="drupalstat-footer">
	<hr class="drupalstat-hr" />
	<p>Powered by DrupalStat, {{ drupalstatVersion }}, &copy; Copyright 2016, <a href="http://incurs.us">Incursus, Inc.</a>, All rights reserved.</p>
</div>
